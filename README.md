# Telegram-бот "3DPrintQueue" (Robo548manufacturing)

Бот для управления очередью заказов на 3D-печать.

## Установка

1. Создайте виртуальное окружение:
```bash
python -m venv venv
```

2. Активируйте виртуальное окружение:
   - Windows: `venv\Scripts\activate`
   - Linux/Mac: `source venv/bin/activate`

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Настройте конфигурацию:
   - Получите токен бота у [@BotFather](https://t.me/BotFather) в Telegram
   - Узнайте ваш Telegram user_id (можно у бота [@userinfobot](https://t.me/userinfobot))
   
   Создайте файл `.env` в корне проекта (на основе `.env.example`):
   ```bash
   # Скопируйте пример файла
   copy .env.example .env  # Windows
   # или
   cp .env.example .env    # Linux/Mac
   ```
   
   Затем отредактируйте `.env` и укажите свои данные:
   ```
   BOT_TOKEN=your_bot_token_here
   ADMIN_IDS=123456789,987654321
   ```
   
   **Важно:** Файл `.env` не попадает в git (уже добавлен в `.gitignore`), поэтому ваши секретные данные будут в безопасности.

## Запуск

```bash
python main.py
```

## Структура проекта

```
.
├── main.py              # Точка входа
├── config.py            # Конфигурация (читает из .env)
├── database.py          # Работа с БД
├── keyboards.py         # Клавиатуры
├── states.py            # Состояния FSM
├── utils.py             # Вспомогательные функции
├── handlers/            # Обработчики
│   ├── __init__.py
│   ├── user_handlers.py    # Обработчики для пользователей
│   └── admin_handlers.py   # Обработчики для администраторов
├── .env                 # Конфигурация (токен, ID админов) - создать на основе .env.example
├── .env.example         # Пример конфигурационного файла
├── files/               # Хранилище файлов (создается автоматически)
│   ├── photos/          # Фото моделей
│   └── models/          # 3D-модели
├── logs/                # Логи (создается автоматически)
└── requirements.txt     # Зависимости
```

## Основные функции

### Для пользователей:
- Регистрация (ФИО)
- Создание заказа (фото, 3D-модель, выбор материалов)
- Просмотр своих заказов
- Уведомления об изменении статуса

### Для администраторов:
- Просмотр заказов по статусам
- Детальный просмотр заказа
- Смена статуса заказа
- Скачивание 3D-моделей с автоматическим переименованием
- Управление материалами и цветами

## База данных

Используется SQLite. База данных создается автоматически при первом запуске.

Таблицы:
- `users` - пользователи
- `orders` - заказы
- `statuses` - статусы заказов
- `materials` - типы пластика
- `colors` - цвета

## Логирование

Логи сохраняются в директории `logs/` с ротацией по дням. Также выводятся в консоль.

## Лицензия

См. файл LICENSE
